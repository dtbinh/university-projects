%t = 'LKZZOVCHNARZRLPJMONRAOXIUPMCPQEQXPLUPSSXOOVZRNSXOXPCCSXONCRRADPVILXOZPVZNOCCSRPVKVEVRJVZOTSXSXORKSOAZRRAQRKCZRVCHMOAOPQXOZMHPLCOVZOAMAIZWORNLSRVOJISXRKSEOAMRAAPICSXPSLTPVVOZSXOQXPLUJISXRVOQKADIVWLTAIVWRNNINSHNOOSISJPLPVPVQIOVSZONOVQORNSXOZJPADOLPWPIVLSPVHOVOUHSXPSUIWXSQPTSKAOSXONIALSXPCCPVZSXORKSOATPLLPWOLSXOHQRKCZRVCHTPLLPQARLLISIVLIVWCONICOPSSXOMAIVEWPVZPCNXPCSOZPVZSXORSXOALQPUOKTIVPTPQEMOXIVZCOPZSXOJPHWIUCIXOLPIZTITTIVPVZUOAAHVOFSLSAPIWXSRVPVZKTSXOLSPIAMOHRVZSXOZRRAPAARJLNOCCPURVWSXOURVOLSAKQENARZRPVZLTAPVWMPQEPVRSXOATIOAQOZWPVZPCNLXPSPVZLSKQESXOAOCIEOPMCPQENOPSXOANARZRCRREOZMOXIVZMOHRVZSXONIAOXOLPJLJPAUIVWMCPQENIWKAOLSXOAOLOOUOZSRMOXKVZAOZLRNRAQLSXOHMAPVZILXOZLTOPALPVZLQIUISPALJXIQXLXRVOAOZPLMCRRZIVSXONIAOCIWXSARCCOZSXOZAKUMOPSLWARJIVWCRKZOAPVZZRRUZRRUCRKZOAZRRUZRRUCOWRCPLSKAVOZPVZLOSPVPAARJSRSXOLSAIVWSXRKWXISJPLPCRVWLXRSNRAXILLUPCCMRJXOZAOJMKSXILXPVZNOCCPVZSXOPAARJLCITTOZSRSXOWARKVZXOWPDOPQAHRNZILUPHPVZNOPASJRWAOPSSARCCLPTTOPAOZSXOHMRAOWAOPSLCPMLRNLSRVOPVZNCKVWSXOUZRJVSRLOADOPLWPVWJPHLRDOASXONIAOMKSISJPLVRSSXOSARCCLSXPSXPZNICCOZSXOOCNJISXSOAARASXOAPVELRNSXORAQLXPZRTOVOZPVZSXOHQARJZOZPJPHPLINSXOHSXOULOCDOLJOAOPNAPIZLRUOSXIVWJPLQRUIVWKTMOXIVZSXOUJXPSISJPLQRKCZVRSMOLOOVISJPLCIEOPWAOPSLXPZRJIVSXOUIZZCORNJXIQXJPLPZPAENRAURNUPVLXPTOUPHMOHOSWAOPSOAPVZPTRJOAPVZSOAARALOOUOZSRMOIVISPVZSRWRMONRAOISISQPUOSRSXOOZWORNSXONIAOPVZSXOCIWXSNPZOZPLINPQCRKZXPZMOVSRDOAISSXOVJISXPAKLXISCOPTOZPQARLLSXONILLKAOSXONCPUOLARPAOZKTSRWAOOSISPVZJAOPSXOZPMRKSISPVZPMCPQELUREOLJIACOZIVSXOPIAISLLSAOPUIVWUPVOEIVZCOZPVZMCPGOZMOXIVZISIVISLAIWXSXPVZJPLPMCPZOCIEOPLSPMMIVWSRVWKORNNIAOIVISLCONSISXOCZPJXITRNUPVHSXRVWLPIPIJPICOZCOWRCPLPMPCARWPMPCARWILQRUOWIUCILSPAOZJISXJIZOOHOLZKAIVLMPVOXOQAIOZPVZCOSSIVWXILPFONPCCXOQRDOAOZXILNPQOPMPCARWUKSSOAOZWPVZPCNVRJIKVZOALSPVZXONPCSOAOZPVZCOPVOZXOPDICHRVXILLSPNNJXPSPVODICNRASKVOPVZIPUPCAOPZHJOPAHSXOZPAENIWKAOLSAOPUIVWJISXNIAOAPQOZSRJPAZLSXOUSXORAQLHOCCOZPVZTRKAOZRDOASXOLSRVOWPVWJPHLSXOVMRARUIAAPILOZXILXRAVPVZMCOJCRKZSXOQXPCCOVWOAPVWPVZMOCCRJOZCIEOSXOLXRKSRNUPVHSXARPSLKVZOASXOQPDOAVRKLARRNNRAPURUOVSSXORAQLYKPICOZPVZSXONIOAHLXPZRJXPCSOZSXOVSXOOQXROLZIOZPLLKZZOVCHPLPNCPUOMCRJVRKSMHPZPAEJIVZPVZSXOOVOUHPZDPVQOZPWPIVRDOASXOMAIZWOQAIOZWPVZPCNAOQPCCIVWXILLSAOVWSXNCHSXILILPNROMOHRVZPVHRNHRKIUKLSXRCZSXOVPAARJJPHNCHPAPWRAVPVZMRARUIAZIZVRSXOOZSXOQRUUPVZMKSLSICCXOCZSXOIAWARKVZLIZOMHLIZOMOXIVZWPVZPCNPSSXONPAOVZRNSXOMAIZWOSXORSXOALXPCSOZBKLSJISXIVSXOZRRAJPHPSSXOXPCCLOVZPVZSKAVOZKVPMCOSRCOPDOSXOIACOPZOASRNPQOSXOOVOUHPCRVOSXOMPCARWAOPQXOZSXOMAIZWOWPVZPCNLSRRZIVSXOUIZZCORNSXOLTPVCOPVIVWRVSXOLSPNNIVXILCONSXPVZMKSIVXILRSXOAXPVZWCPUZAIVWWCOPUOZQRCZPVZJXISOXILOVOUHXPCSOZPWPIVNPQIVWXIUPVZSXOLXPZRJPMRKSISAOPQXOZRKSCIEOSJRDPLSJIVWLISAPILOZSXOJXITPVZSXOSXRVWLJXIVOZPVZQAPQEOZNIAOQPUONARUISLVRLSAICLMKSWPVZPCNLSRRZNIAUHRKQPVVRSTPLLXOLPIZSXORAQLLSRRZLSICCPVZPZOPZLICOVQONOCCIPUPLOADPVSRNSXOLOQAOSNIAOJIOCZOARNSXONCPUORNPVRAHRKQPVVRSTPLLSXOZPAENIAOJICCVRSPDPICHRKNCPUORNKZHVWRMPQESRSXOLXPZRJHRKQPVVRSTPLLSXOMPCARWUPZOVRPVLJOASXONIAOIVISLOOUOZSRZIOMKSSXOZPAEVOLLWAOJISLSOTTOZNRAJPAZLCRJCHRVSRSXOMAIZWOPVZLKZZOVCHISZAOJISLOCNKTSRPWAOPSXOIWXSPVZISLJIVWLJOAOLTAOPZNARUJPCCSRJPCCMKSLSICCWPVZPCNQRKCZMOLOOVWCIUUOAIVWIVSXOWCRRUXOLOOUOZLUPCCPVZPCSRWOSXOAPCRVOWAOHPVZMOVSCIEOPJIGOVOZSAOOMONRAOSXORVLOSRNPLSRAUNARURKSRNSXOLXPZRJPAOZLJRAZCOPTOZNCPUIVWWCPUZAIVWWCISSOAOZJXISOIVPVLJOASXOAOJPLPAIVWIVWQCPLXPVZPLSPMRNJXISONIAOSXOMPCARWNOCCMPQEPVZISLLJRAZNCOJKTIVURCSOVNAPWUOVSLSXOJIGPAZLJPHOZRVSXOMAIZWOLSOTTOZMPQEPTPQOPVZSXOVPWPIVLSRRZLSICCHRKQPVVRSTPLLXOLPIZJISXPMRKVZSXOMPCARWCOPTOZNKCCKTRVSXOMAIZWOISLJXITJXIACOZPVZXILLOZXOQPVVRSLSPVZPCRVOQAIOZPAPWRAVLKZZOVCHPVZAPVMPQEPCRVWSXOMAIZWOXOLXRKSOZIPUJISXHRKWPVZPCNOCOVZICWRVZRAQAIOZMRARUIAPVZCOPTOZPNSOAXIUPSSXPSURUOVSWPVZPCNCINSOZXILLSPNNPVZQAHIVWPCRKZXOLURSOSXOMAIZWOMONRAOXIUSXOLSPNNMAREOPLKVZOAPVZNOCCNARUXILXPVZPMCIVZIVWLXOOSRNJXISONCPUOLTAPVWKTSXOMAIZWOQAPQEOZAIWXSPSSXOMPCARWLNOOSISMAREOPVZSXOLSRVOKTRVJXIQXISLSRRZQAPLXOZIVSRSXOWKCNJXICOSXOAOLSAOUPIVOZTRILOZYKIDOAIVWCIEOPSRVWKORNARQESXAKLSRKSIVSROUTSIVOLLJISXPSOAAIMCOQAHSXOMPCARWNOCCNRAJPAZPVZISLLXPZRJTCKVWOZZRJVPVZDPVILXOZMKSODOVPLISNOCCISLJKVWISLJXITPVZSXOSXRVWLCPLXOZPVZQKACOZPMRKSSXOJIGPAZLEVOOLZAPWWIVWXIUSRSXOMAIVEXOLSPWWOAOZPVZNOCCWAPLTOZDPIVCHPSSXOLSRVOPVZLCIZIVSRSXOPMHLLNCHHRKNRRCLXOQAIOZPVZJPLWRVO';
%t = 'abriegre'
t = getText('Bespreking.java');
disp(['Length = ',num2str(size(t,2))]);
key = gen_key([1 1 0 1 0 1 0 0 1 1 0 1 1 0 0 0]);
key2 = gen_key([1 1 1 1 0 1 0 0 1 1 0 1 1 1 1 1]);
kt = encode(t,key)
%diff = double(kt)-double(t);
format long
figure;
freq1 = hist(double(kt),0:255);
freq2 = hist(double(t),0:255);
subplot(2,1,1);
bar(0:255,freq1/size(kt,2)*100)
subplot(2,1,2);
bar(0:255,freq2/size(t,2)*100)
%figure;
%plot(double(t),double(kt),'.')
[y i] = max(double(t));
disp(['Max = ',t(i),' Ascii = ',num2str(double(t(i)))]);

double(kt);
writeText('output.txt',kt);
kt = getText('output.txt');
decode(encode(t,key),key)